var P=Object.defineProperty;var r=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var k=(e,s,o)=>s in e?P(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o,p=(e,s)=>{for(var o in s||(s={}))w.call(s,o)&&k(e,o,s[o]);if(r)for(var o of r(s))D.call(s,o)&&k(e,o,s[o]);return e};var S=(e,s)=>{var o={};for(var a in e)w.call(e,a)&&s.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&r)for(var a of r(e))s.indexOf(a)<0&&D.call(e,a)&&(o[a]=e[a]);return o};import{r as l,j as t}from"./react-C4x6nB0e.js";import{X as R,B as W,a2 as Y,ac as q,Y as A,a as u,ad as G,I as f,f as m,F as K,S as X,ae as J,G as N,H as Q,D as U,i as V,j as Z,k as _,e as ee}from"./@mui-ENk-6xqm.js";import{S as te,A as se}from"./index-DJwqLG_m.js";import{L as oe}from"./react-router-D3ErKnLK.js";const ae=J(e=>{const a=e,{expand:s}=a,o=S(a,["expand"]);return t.jsx(f,p({},o))})(({theme:e})=>({marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),variants:[{props:({expand:s})=>!s,style:{transform:"rotate(0deg)"}},{props:({expand:s})=>!!s,style:{transform:"rotate(180deg)"}}]}));function xe({id:e,title:s,price:o,description:a,category:d,image:x,rate:c,onAddToCartSuccess:j,sx:E={}}){const[i,F]=l.useState(!1),[I,C]=l.useState(!1),{favorites:h,setFavorites:g,cart:b,setCart:O,addToCart:B,formatPrice:H}=l.useContext(te),{isAuthenticated:L}=l.useContext(se),M=()=>{F(!i)},v=h.some(n=>n.id===e),y=b.some(n=>n.id===e),$=()=>{L?g(v?h.filter(n=>n.id!==e):[...h,{id:e,title:s,price:o,description:a,category:d,image:x,rating:{rate:c}}]):C(!0)},T=()=>{if(y)O(b.filter(n=>n.id!==e));else{const n={id:e,title:s,price:o,description:a,category:d,image:x,rate:c};B(n),j&&j(n)}},z=()=>{C(!1)};return t.jsxs(R,{id:e,sx:p({maxWidth:284,minHeight:{xs:400,sm:480,md:520},display:"flex",flexDirection:"column",justifyContent:"space-between"},E),children:[t.jsxs(oe,{to:`/shop/products/${e}`,style:{textDecoration:"none",color:"inherit"},children:[t.jsx(W,{sx:{height:{xs:190,sm:220,md:260},width:"auto",display:"flex",alignItems:"center",justifyContent:"center",p:1},children:t.jsx(Y,{component:"img",image:x,alt:s,sx:{maxHeight:"100%",maxWidth:"100%",objectFit:"contain"}})}),t.jsx(q,{title:s,subheader:`${d} - ${c}`,sx:{"& .MuiCardHeader-title":{display:"-webkit-box",overflow:"hidden",textOverflow:"ellipsis",WebkitBoxOrient:"vertical",WebkitLineClamp:2,maxWidth:"100%",fontSize:{xs:"16px",sm:"20px"}},"& .MuiCardHeader-subheader":{display:"-webkit-box",overflow:"hidden",textOverflow:"ellipsis",WebkitBoxOrient:"vertical",WebkitLineClamp:1,maxWidth:"100%",fontSize:{xs:"11px",sm:"16px"}}}}),t.jsx(W,{sx:{m:{xs:0,sm:1}},children:t.jsx(A,{children:t.jsx(u,{variant:"h4",align:"center",sx:{fontSize:{xs:"25px",sm:"30px"}},children:`$ ${H(o)}`})})})]}),t.jsxs(G,{disableSpacing:!0,children:[t.jsx(f,{"aria-label":"add to favorites",onClick:$,sx:{"&:focus":{outline:"none"}},children:t.jsx(m,{title:"Add to Favorites",arrow:!0,children:t.jsx(K,{sx:{color:v?"secondary.main":"inherit"}})})}),t.jsx(f,{"aria-label":"share",onClick:T,sx:{"&:focus":{outline:"none"}},children:t.jsx(m,{title:"Add to Cart",arrow:!0,children:t.jsx(X,{sx:{color:y?"primary.main":"inherit"}})})}),t.jsx(ae,{expand:i,onClick:M,"aria-expanded":i,"aria-label":"show more",sx:{"&:focus":{outline:"none"}},children:t.jsx(m,{title:"+ Info",arrow:!0,children:t.jsx(N,{})})})]}),t.jsx(Q,{in:i,timeout:"auto",unmountOnExit:!0,children:t.jsx(A,{children:t.jsx(u,{variant:"body2",sx:{color:"text.secondary"},children:a})})}),t.jsxs(U,{open:I,children:[t.jsx(V,{children:"Login Required"}),t.jsx(Z,{children:t.jsx(u,{variant:"body1",children:"You must log in to add products to favorites."})}),t.jsx(_,{children:t.jsx(ee,{onClick:z,color:"primary",children:"OK"})})]})]})}export{xe as I};
