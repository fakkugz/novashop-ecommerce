import{r as p,j as e}from"./react-DkAObSjh.js";import{S as H}from"./index-CpG1OzcJ.js";import{B as s,a as P,r as _,I as O,s as R,t as B,L as D,F as K,u as W,v as N,w as k,x as Q,y as I,z as U,e as T,E as V,H as J,J as q,K as X,N as Y,O as Z,Q as ee,R as te,G as m,U as $,M as ie,V as se,W as ne}from"./@mui-Zmwlpge7.js";import{I as re}from"./ItemCard-DdMK8qIc.js";import{u as oe}from"./react-router-Bm47D4GK.js";import{A as ae}from"./AddedToCart-BVzE72bD.js";import"./classnames-DKJafm6p.js";import"./react-dom-Cr59PrOa.js";import"./scheduler-9kLHP6Nb.js";import"./axios-QAAP6aZB.js";import"./react-slick-AwzzSKZm.js";import"./lodash.debounce-De5Qdj2y.js";import"./resize-observer-polyfill-xl0pFsdo.js";import"./json2mq-DmRDQ8Ce.js";import"./string-convert-Bhuo--sE.js";import"./enquire.js-B8qsBZnP.js";/* empty css                       */import"./framer-motion-CQh47Nm3.js";import"./motion-dom-DfhgNKIO.js";import"./motion-utils-DJR9y8Oj.js";import"./@emotion-DUPsLxmx.js";import"./hoist-non-react-statics-Cxfv-rx9.js";import"./@babel-B4YMtfbM.js";import"./stylis-DDa9OTMq.js";import"./clsx-B-dksMZM.js";import"./@popperjs-CF2GPdRh.js";import"./react-transition-group-DV3VXSN1.js";import"./react-is-BPJnJB5S.js";import"./cookie-BOGkaJtQ.js";const G=()=>{const[h,v]=p.useState(!1),{categories:y,activeFilters:d,setActiveFilters:r,priceFilter:o,setPriceFilter:l,rateFilter:a,setRateFilter:C,min:u,setMin:M,max:g,setMax:b,rateRange:c,setRateRange:f,showOnlyFavorites:x,setShowOnlyFavorites:w}=p.useContext(H),j=oe();new URLSearchParams(j.search),p.useEffect(()=>{const i=new URLSearchParams(j.search).get("category");if(i){const n=i.split(",");r(E=>JSON.stringify(E)===JSON.stringify(n)?E:n)}else r(n=>n.length===0?n:[])},[j.search]);const F=()=>{v(!h)},z=t=>{r(i=>i.includes(t)?i.filter(n=>n!==t):[...i,t])},L=()=>{const t=u===""?0:Number(u),i=g===""?1/0:Number(g);l({min:t,max:i})},S=(t,i)=>{f(i),C({min:i[0],max:i[1]})},A=()=>{M(""),b(""),f([1,5]),r([]),l({min:0,max:1/0}),C({min:1,max:5}),w(!1)};return e.jsxs(s,{sx:{backgroundColor:"#1b1b1b",color:"white",height:"auto",p:{xs:1,sm:2},borderRadius:"5px",minHeight:{xs:"100%",sm:"auto"}},children:[e.jsx(P,{variant:"h5",gutterBottom:!0,sx:{ml:1},children:"Filters"}),e.jsxs(_,{direction:"column",divider:e.jsx(B,{orientation:"horizontal",flexItem:!0,sx:{bgcolor:"grey.500"}}),spacing:2,sx:{mb:1},children:[o.min===0&&o.max===1/0?null:e.jsxs(s,{sx:{bgcolor:"#efefef",color:"black",width:"fit-content",padding:"0 5px",display:"flex",justifyContent:"center",alignItems:"center"},children:["De $",o.min," a $",o.max,e.jsx(O,{sx:{padding:"0"},onClick:()=>l({min:0,max:1/0}),children:e.jsx(R,{sx:{fontSize:16,color:"gray"}})})]}),e.jsx(s,{sx:{display:"flex",gap:"5px",flexWrap:"wrap"},children:d.length>0?d.map(t=>e.jsxs(s,{sx:{bgcolor:"#efefef",color:"black",width:"fit-content",padding:"0 5px",display:"flex",justifyContent:"center",alignItems:"center",gap:"3px"},children:[t,e.jsx(O,{sx:{padding:"0"},onClick:()=>r(d.filter(i=>i!==t)),children:e.jsx(R,{sx:{fontSize:16,color:"gray"}})})]},t)):null}),a.min===1&&a.max===5?null:e.jsxs(s,{sx:{bgcolor:"#efefef",color:"black",width:"fit-content",padding:"0 5px",display:"flex",justifyContent:"center",alignItems:"center"},children:["Rate: ",a.min," a ",a.max,e.jsx(O,{sx:{padding:"0"},onClick:()=>C({min:1,max:5}),children:e.jsx(R,{sx:{fontSize:16,color:"gray"}})})]})]}),e.jsx(B,{sx:{mb:2,bgcolor:"grey.500"}}),e.jsxs(D,{children:[e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",pl:2,mb:2},children:[e.jsx(K,{sx:{color:x?"secondary.main":"white",mr:1,transition:"all 0.3s ease-in-out"}}),e.jsx(P,{children:"Only Favorites"}),e.jsx(W,{checked:x,onChange:()=>w(!x)})]}),e.jsxs(N,{children:[e.jsx(k,{sx:{minWidth:"44px"},children:e.jsx(Q,{sx:{color:u||g?"secondary.main":"white",transition:"all 0.3s ease-in-out"}})}),e.jsx(I,{primary:"Price"})]}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1,paddingLeft:1,marginBottom:"1.5rem",maxWidth:"93%"},children:[e.jsx(U,{label:"Min",type:"number",size:"small",value:u,onChange:t=>M(t.target.value),sx:{"& .MuiOutlinedInput-root":{padding:"2px","& input":{padding:"6px 8px"},"& fieldset":{borderColor:"white"},"&:hover fieldset":{borderColor:"white"},"&.Mui-focused fieldset":{borderColor:"white"}},"& .MuiInputBase-input":{color:"white",fontSize:"0.875rem"},"& .MuiInputLabel-root":{color:"white",fontSize:"0.8rem"}}}),e.jsx(U,{label:"Max",type:"number",size:"small",value:g,onChange:t=>b(t.target.value),sx:{"& .MuiOutlinedInput-root":{padding:"2px","& input":{padding:"6px 6px"},"& fieldset":{borderColor:"white"},"&:hover fieldset":{borderColor:"white"},"&.Mui-focused fieldset":{borderColor:"white"}},"& .MuiInputBase-input":{color:"white",fontSize:"0.875rem"},"& .MuiInputLabel-root":{color:"white",fontSize:"0.8rem"}}}),e.jsx(T,{variant:"contained",onClick:L,sx:{borderRadius:"50%",padding:"0",minWidth:"30px",height:"30px"},children:e.jsx(V,{sx:{fontSize:14}})})]}),e.jsxs(J,{onClick:F,children:[e.jsx(k,{sx:{minWidth:"44px"},children:e.jsx(q,{sx:{color:d.length>0?"secondary.main":"white",transition:"all 0.3s ease-in-out"}})}),e.jsx(I,{primary:"Category"}),h?e.jsx(X,{}):e.jsx(Y,{})]}),e.jsx(Z,{in:h,timeout:"auto",unmountOnExit:!0,children:e.jsx(D,{component:"div",disablePadding:!0,children:y.length>0?y.map(t=>e.jsxs(J,{sx:{pl:4,display:"flex",alignItems:"center"},children:[e.jsx(k,{sx:{minWidth:.25},children:e.jsx(W,{checked:d.includes(t),onChange:()=>z(t)})}),e.jsx(I,{primary:t.charAt(0).toUpperCase()+t.slice(1),sx:{textAlign:"left"}})]},t)):e.jsx(I,{primary:"No categories"})})}),e.jsxs(N,{sx:{marginTop:"2rem"},children:[e.jsx(k,{sx:{minWidth:"44px"},children:e.jsx(ee,{sx:{color:c[0]===1&&c[1]===5?"white":"secondary.main",transition:"all 0.3s ease-in-out"}})}),e.jsx(I,{primary:"Rate"})]}),e.jsxs(s,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"85%",paddingLeft:5,backgroundColor:"#1b1b1b"},children:[e.jsx(te,{value:c,onChange:S,valueLabelDisplay:"auto",step:.1,min:1,max:5}),e.jsxs(P,{variant:"body2",children:["Min: ",c[0]," - Max: ",c[1]]})]})]}),e.jsx(s,{sx:{display:"flex",justifyContent:"center"},children:e.jsx(T,{variant:"outlined",color:"white",onClick:A,sx:{mt:3,mb:3,width:"85%","&:hover":{borderColor:"primary.main"}},children:"Clean Filters"})})]})},Be=({loading:h})=>{const{allProducts:v,favorites:y,showOnlyFavorites:d,activeFilters:r,priceFilter:o,rateFilter:l,filteredProducts:a,setFilteredProducts:C,lastAddedProduct:u,setLastAddedProduct:M,addToCartOpenModal:g,setAddToCartOpenModal:b,currentPage:c,setCurrentPage:f,productsPerPage:x,currentProducts:w}=p.useContext(H),[j,F]=p.useState(!1),z=Math.ceil(a.length/x);p.useEffect(()=>{window.scrollTo(0,0),f(1)},[]);const L=(t,i)=>{f(i),window.scrollTo(0,0)};p.useEffect(()=>{let t=v;if(r.length>0&&(t=t.filter(i=>r.includes(i.category))),o.min!==null&&o.max!==null&&(t=t.filter(i=>i.price>=o.min&&i.price<=o.max)),l.min!==null&&l.max!==null&&(t=t.filter(i=>i.rating.rate>=l.min&&i.rating.rate<=l.max)),d){const i=y.map(n=>n.title);t=t.filter(n=>i.includes(n.title))}C(t)},[v,r,o,l,d,y]),p.useEffect(()=>{(a.length===0||c>Math.ceil(a.length/x))&&f(1)},[a,c,x]);const S=()=>{F(!j)},A=t=>{M(t),b(!0)};return h?e.jsx(s,{sx:{p:6},children:e.jsx(m,{container:!0,spacing:2,children:[...Array(8)].map((t,i)=>e.jsx(m,{size:{xs:6,md:3},children:e.jsx(s,{sx:{padding:0},children:e.jsx($,{variant:"rectangular",width:"100%",height:500,animation:"wave",sx:{bgcolor:"rgb(59, 59, 59)"}})})},i))})}):e.jsxs(s,{sx:{p:{xs:3,sm:6}},children:[e.jsx(s,{sx:{display:{xs:"block",md:"none"},mb:2},children:e.jsx(T,{variant:"contained",startIcon:e.jsx(ie,{}),onClick:S,sx:{backgroundColor:"secondary.light"},children:"Filters"})}),e.jsxs(m,{container:!0,spacing:2,sx:{height:"100%",alignItems:"flex-start"},children:[e.jsx(m,{size:3,sx:{display:{xs:"none",md:"block"}},children:e.jsx(G,{})}),e.jsx(m,{size:{xs:12,md:9},children:e.jsx(m,{container:!0,spacing:2,children:h?[...Array(6)].map((t,i)=>e.jsx(m,{size:{xs:6,sm:4},children:e.jsx(s,{sx:{padding:2},children:e.jsx($,{variant:"rectangular",width:"100%",height:200})})},i)):w.length>0?w.map(t=>e.jsx(m,{size:{xs:6,sm:4},sx:{opacity:0,animation:"fadeIn 0.3s ease forwards",animationDelay:`${.03*t.id}s`},children:e.jsx(re,{id:t.id,title:t.title,price:t.price,description:t.description,category:t.category,image:t.image,rate:t.rating.rate,onAddToCartSuccess:A})},t.id)):e.jsx(P,{variant:"h5",sx:{color:"gray",fontStyle:"italic",fontWeight:500},children:"No products found"})},r.join("-"))})]}),z>1&&e.jsx(s,{sx:{display:"flex",justifyContent:"center",mt:3},children:e.jsx(se,{count:Math.ceil(a.length/x),page:c,onChange:L,color:"primary",sx:{"& .MuiPaginationItem-root":{color:"white"},"& .Mui-selected":{backgroundColor:"primary.main",color:"white",border:"1px solid white",outline:"none"},"& .MuiPaginationItem-root:focus":{outline:"none"}}})}),e.jsx(ne,{anchor:"left",open:j,onClose:S,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",md:"none"},"& .MuiDrawer-paper":{width:240}},children:e.jsx(G,{})}),e.jsx(ae,{open:g,product:u,onClose:()=>b(!1)})]})};export{Be as default};
