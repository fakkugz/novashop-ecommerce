import{r as y,j as e}from"./react-C4x6nB0e.js";import{B as a,a as M,o as X,I as S,p as z,q as R,L as E,F as Y,r as D,s as B,t as F,u as Z,v as C,w as W,e as T,x as ee,y as N,z as te,E as se,G as ie,H as re,J as ne,K as oe,N as g,O as J,M as ae,Q as le,R as ce}from"./@mui-ENk-6xqm.js";import{I as de}from"./ItemCard-B1vf1M0z.js";import{s as w,a as L,b as O,c as U,d as $,e as G,f as H,g as K,h as xe,i as me,j as A,k as _,l as pe}from"./index-Beew410P.js";import{u as Q,a as b}from"./react-redux-CqFTqn1Y.js";import{u as he}from"./react-router-D3ErKnLK.js";import{A as ue}from"./AddedToCart-D-LMTu5p.js";import"./cookie-DlAFqcQt.js";import"./@emotion-BhuicUnK.js";import"./hoist-non-react-statics-Cxfv-rx9.js";import"./@babel-B4YMtfbM.js";import"./stylis-DDa9OTMq.js";import"./clsx-B-dksMZM.js";import"./@popperjs-CF2GPdRh.js";import"./react-transition-group-C87tqeo7.js";import"./react-dom-CjuexJA-.js";import"./scheduler-9kLHP6Nb.js";import"./react-is-BPJnJB5S.js";import"./formatPrice-CN-i1W_t.js";import"./@reduxjs-y-geLa07.js";import"./redux-CENK1Oau.js";import"./immer-BR-8vkaV.js";import"./redux-thunk-ClJT1hhx.js";import"./swiper-BlMsgj9I.js";import"./axios-QAAP6aZB.js";import"./reselect-MJrD8sqi.js";import"./use-sync-external-store-jrMDq4jT.js";const q=()=>{const t=Q(),[h,f]=y.useState(!1),u=b(i=>i.products.categories),{activeFilters:r,priceFilter:c,rateFilter:d,min:x,max:m,rateRange:p,showOnlyFavorites:n}=b(i=>i.filters),o=he();y.useEffect(()=>{const s=new URLSearchParams(o.search).get("category");if(s){const l=s.split(","),V=JSON.stringify(r)===JSON.stringify(l)?r:l;t(w(V))}else{const l=r.length===0?r:[];t(w(l))}},[t,o.search]);const j=()=>{f(!h)},I=i=>{const s=r.includes(i)?r.filter(l=>l!==i):[...r,i];t(w(s))},P=()=>{const i=x===""?0:Number(x),s=m===""?1/0:Number(m);t(L({min:i,max:s}))},k=(i,s)=>{t(H(s)),t(O({min:s[0],max:s[1]}))},v=()=>{t($("")),t(G("")),t(H([1,5])),t(w([])),t(L({min:0,max:1/0})),t(O({min:1,max:5})),t(U(!1))};return e.jsxs(a,{sx:{backgroundColor:"#1b1b1b",color:"white",height:"auto",p:{xs:1,sm:2},borderRadius:"5px",minHeight:{xs:"100%",sm:"auto"}},children:[e.jsx(M,{variant:"h5",gutterBottom:!0,sx:{ml:1},children:"Filters"}),e.jsxs(X,{direction:"column",divider:e.jsx(R,{orientation:"horizontal",flexItem:!0,sx:{bgcolor:"grey.500"}}),spacing:2,sx:{mb:1},children:[c.min===0&&c.max===1/0?null:e.jsxs(a,{sx:{bgcolor:"#efefef",color:"black",width:"fit-content",padding:"0 5px",display:"flex",justifyContent:"center",alignItems:"center"},children:["De $",c.min," a $",c.max,e.jsx(S,{sx:{padding:"0"},onClick:()=>t(L({min:0,max:1/0})),children:e.jsx(z,{sx:{fontSize:16,color:"gray"}})})]}),e.jsx(a,{sx:{display:"flex",gap:"5px",flexWrap:"wrap"},children:r.length>0?r.map(i=>e.jsxs(a,{sx:{bgcolor:"#efefef",color:"black",width:"fit-content",padding:"0 5px",display:"flex",justifyContent:"center",alignItems:"center",gap:"3px"},children:[i,e.jsx(S,{sx:{padding:"0"},onClick:()=>t(w(r.filter(s=>s!==i))),children:e.jsx(z,{sx:{fontSize:16,color:"gray"}})})]},i)):null}),d.min===1&&d.max===5?null:e.jsxs(a,{sx:{bgcolor:"#efefef",color:"black",width:"fit-content",padding:"0 5px",display:"flex",justifyContent:"center",alignItems:"center"},children:["Rate: ",d.min," a ",d.max,e.jsx(S,{sx:{padding:"0"},onClick:()=>t(O({min:1,max:5})),children:e.jsx(z,{sx:{fontSize:16,color:"gray"}})})]})]}),e.jsx(R,{sx:{mb:2,bgcolor:"grey.500"}}),e.jsxs(E,{children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",pl:2,mb:2},children:[e.jsx(Y,{sx:{color:n?"secondary.main":"white",mr:1,transition:"all 0.3s ease-in-out"}}),e.jsx(M,{children:"Only Favorites"}),e.jsx(D,{checked:n,onChange:()=>t(U(!n))})]}),e.jsxs(B,{children:[e.jsx(F,{sx:{minWidth:"44px"},children:e.jsx(Z,{sx:{color:x||m?"secondary.main":"white",transition:"all 0.3s ease-in-out"}})}),e.jsx(C,{primary:"Price"})]}),e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1,paddingLeft:1,marginBottom:"1.5rem",maxWidth:"93%"},children:[e.jsx(W,{label:"Min",type:"number",size:"small",value:x,onChange:i=>t($(i.target.value)),sx:{"& .MuiOutlinedInput-root":{padding:"2px","& input":{padding:"6px 8px"},"& fieldset":{borderColor:"white"},"&:hover fieldset":{borderColor:"white"},"&.Mui-focused fieldset":{borderColor:"white"}},"& .MuiInputBase-input":{color:"white",fontSize:"0.875rem"},"& .MuiInputLabel-root":{color:"white",fontSize:"0.8rem"}}}),e.jsx(W,{label:"Max",type:"number",size:"small",value:m,onChange:i=>t(G(i.target.value)),sx:{"& .MuiOutlinedInput-root":{padding:"2px","& input":{padding:"6px 6px"},"& fieldset":{borderColor:"white"},"&:hover fieldset":{borderColor:"white"},"&.Mui-focused fieldset":{borderColor:"white"}},"& .MuiInputBase-input":{color:"white",fontSize:"0.875rem"},"& .MuiInputLabel-root":{color:"white",fontSize:"0.8rem"}}}),e.jsx(T,{variant:"contained",onClick:P,sx:{borderRadius:"50%",padding:"0",minWidth:"30px",height:"30px"},children:e.jsx(ee,{sx:{fontSize:14}})})]}),e.jsxs(N,{onClick:j,children:[e.jsx(F,{sx:{minWidth:"44px"},children:e.jsx(te,{sx:{color:r.length>0?"secondary.main":"white",transition:"all 0.3s ease-in-out"}})}),e.jsx(C,{primary:"Category"}),h?e.jsx(se,{}):e.jsx(ie,{})]}),e.jsx(re,{in:h,timeout:"auto",unmountOnExit:!0,children:e.jsx(E,{component:"div",disablePadding:!0,children:u.length>0?u.map(i=>e.jsxs(N,{sx:{pl:4,display:"flex",alignItems:"center"},children:[e.jsx(F,{sx:{minWidth:.25},children:e.jsx(D,{checked:r.includes(i),onChange:()=>I(i)})}),e.jsx(C,{primary:i.charAt(0).toUpperCase()+i.slice(1),sx:{textAlign:"left"}})]},i)):e.jsx(C,{primary:"No categories"})})}),e.jsxs(B,{sx:{marginTop:"2rem"},children:[e.jsx(F,{sx:{minWidth:"44px"},children:e.jsx(ne,{sx:{color:p[0]===1&&p[1]===5?"white":"secondary.main",transition:"all 0.3s ease-in-out"}})}),e.jsx(C,{primary:"Rate"})]}),e.jsxs(a,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"85%",paddingLeft:5,backgroundColor:"#1b1b1b"},children:[e.jsx(oe,{value:p,onChange:k,valueLabelDisplay:"auto",step:.1,min:1,max:5}),e.jsxs(M,{variant:"body2",children:["Min: ",p[0]," - Max: ",p[1]]})]})]}),e.jsx(a,{sx:{display:"flex",justifyContent:"center"},children:e.jsx(T,{variant:"outlined",color:"white",onClick:v,sx:{mt:3,mb:3,width:"85%","&:hover":{borderColor:"primary.main"}},children:"Clean Filters"})})]})},ge=()=>(t,h)=>{const{products:f,filters:u}=h(),{allProducts:r}=f,{activeFilters:c,priceFilter:d,rateFilter:x,showOnlyFavorites:m,favorites:p}=u;let n=r;if(c.length>0&&(n=n.filter(o=>c.includes(o.category))),d.min!=null&&d.max!=null&&(n=n.filter(o=>o.price>=d.min&&o.price<=d.max)),x.min!=null&&x.max!=null&&(n=n.filter(o=>o.rating.rate>=x.min&&o.rating.rate<=x.max)),m){const o=p.map(j=>j.title);n=n.filter(j=>o.includes(j.title))}t(K(n))},Ge=()=>{const t=Q(),{loading:h,allProducts:f,filteredProducts:u,currentPage:r,productsPerPage:c}=b(s=>s.products),{favorites:d,showOnlyFavorites:x,activeFilters:m,priceFilter:p,rateFilter:n}=b(s=>s.filters),o=b(xe),j=b(me);y.useEffect(()=>{t(K(f))},[t,f]);const[I,P]=y.useState(!1);y.useEffect(()=>{window.scrollTo(0,0),t(A(1))},[t]);const k=(s,l)=>{t(A(l)),window.scrollTo(0,0)};y.useEffect(()=>{t(ge())},[t,f,m,p,n,x,d]),y.useEffect(()=>{const s=Math.ceil(u.length/c);r>s&&s>0&&t(A(1))},[t,u,r,c]);const v=()=>{P(!I)},i=s=>{t(pe(s)),t(_(!0))};return h?e.jsx(a,{sx:{p:6},children:e.jsx(g,{container:!0,spacing:2,children:[...Array(8)].map((s,l)=>e.jsx(g,{size:{xs:6,md:3},children:e.jsx(a,{sx:{padding:0},children:e.jsx(J,{variant:"rectangular",width:"100%",height:500,animation:"wave",sx:{bgcolor:"rgb(59, 59, 59)"}})})},l))})}):e.jsxs(a,{sx:{p:{xs:3,sm:6}},children:[e.jsx(a,{sx:{display:{xs:"block",md:"none"},mb:2},children:e.jsx(T,{variant:"contained",startIcon:e.jsx(ae,{}),onClick:v,sx:{backgroundColor:"secondary.light"},children:"Filters"})}),e.jsxs(g,{container:!0,spacing:2,sx:{height:"100%",alignItems:"flex-start"},children:[e.jsx(g,{size:3,sx:{display:{xs:"none",md:"block"}},children:e.jsx(q,{})}),e.jsx(g,{size:{xs:12,md:9},children:e.jsx(g,{container:!0,spacing:2,children:h?[...Array(6)].map((s,l)=>e.jsx(g,{size:{xs:6,sm:4},children:e.jsx(a,{sx:{padding:2},children:e.jsx(J,{variant:"rectangular",width:"100%",height:200})})},l)):o.length>0?o.map(s=>e.jsx(g,{size:{xs:6,sm:4},sx:{opacity:0,animation:"fadeIn 0.3s ease forwards",animationDelay:`${.03*s.id}s`},children:e.jsx(de,{id:s.id,title:s.title,price:s.price,description:s.description,category:s.category,image:s.image,rate:s.rating.rate,onAddToCartSuccess:i})},s.id)):e.jsx(M,{variant:"h5",align:"center",sx:{width:"100%",color:"gray",fontStyle:"italic",fontWeight:500,mt:5},children:"No products found"})},m.join("-"))})]}),j>1&&e.jsx(a,{sx:{display:"flex",justifyContent:"center",mt:3},children:e.jsx(le,{count:Math.ceil(u.length/c),page:r,onChange:k,color:"primary",sx:{"& .MuiPaginationItem-root":{color:"white"},"& .Mui-selected":{backgroundColor:"primary.main",color:"white",border:"1px solid white",outline:"none"},"& .MuiPaginationItem-root:focus":{outline:"none"}}})}),e.jsx(ce,{anchor:"left",open:I,onClose:v,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",md:"none"},"& .MuiDrawer-paper":{width:240}},children:e.jsx(q,{})}),e.jsx(ue,{onClose:()=>_(!1)})]})};export{Ge as default};
