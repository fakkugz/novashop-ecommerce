var P=Object.defineProperty;var r=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var k=(e,s,o)=>s in e?P(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o,p=(e,s)=>{for(var o in s||(s={}))w.call(s,o)&&k(e,o,s[o]);if(r)for(var o of r(s))D.call(s,o)&&k(e,o,s[o]);return e};var S=(e,s)=>{var o={};for(var a in e)w.call(e,a)&&s.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&r)for(var a of r(e))s.indexOf(a)<0&&D.call(e,a)&&(o[a]=e[a]);return o};import{r as l,j as t}from"./react-DkAObSjh.js";import{m as R,B as O,o as q,ac as K,n as W,a as m,ad as N,I as f,f as u,F as Y,S as G,ae as J,N as Q,O as U,D as V,i as X,j as Z,k as _,e as ee}from"./@mui-Zmwlpge7.js";import{S as te,A as se}from"./index-BILIXHaE.js";import{L as oe}from"./react-router-Bm47D4GK.js";const ae=J(e=>{const a=e,{expand:s}=a,o=S(a,["expand"]);return t.jsx(f,p({},o))})(({theme:e})=>({marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),variants:[{props:({expand:s})=>!s,style:{transform:"rotate(0deg)"}},{props:({expand:s})=>!!s,style:{transform:"rotate(180deg)"}}]}));function xe({id:e,title:s,price:o,description:a,category:d,image:x,rate:c,onAddToCartSuccess:j,sx:A={}}){const[i,E]=l.useState(!1),[F,C]=l.useState(!1),{favorites:h,setFavorites:g,cart:b,setCart:I,addToCart:B,formatPrice:L}=l.useContext(te),{isAuthenticated:H}=l.useContext(se),M=()=>{E(!i)},v=h.some(n=>n.id===e),y=b.some(n=>n.id===e),$=()=>{H?g(v?h.filter(n=>n.id!==e):[...h,{id:e,title:s,price:o,description:a,category:d,image:x,rating:{rate:c}}]):C(!0)},T=()=>{if(y)I(b.filter(n=>n.id!==e));else{const n={id:e,title:s,price:o,description:a,category:d,image:x,rate:c};B(n),j&&j(n)}},z=()=>{C(!1)};return t.jsxs(R,{id:e,sx:p({maxWidth:284,minHeight:{xs:400,sm:480,md:520},display:"flex",flexDirection:"column",justifyContent:"space-between"},A),children:[t.jsxs(oe,{to:`/shop/products/${e}`,style:{textDecoration:"none",color:"inherit"},children:[t.jsx(O,{sx:{height:{xs:190,sm:220,md:260},width:"auto",display:"flex",alignItems:"center",justifyContent:"center",p:1},children:t.jsx(q,{component:"img",image:x,alt:s,sx:{maxHeight:"100%",maxWidth:"100%",objectFit:"contain"}})}),t.jsx(K,{title:s,subheader:`${d} - ${c}`,sx:{"& .MuiCardHeader-title":{display:"-webkit-box",overflow:"hidden",textOverflow:"ellipsis",WebkitBoxOrient:"vertical",WebkitLineClamp:2,maxWidth:"100%",fontSize:{xs:"16px",sm:"20px"}},"& .MuiCardHeader-subheader":{display:"-webkit-box",overflow:"hidden",textOverflow:"ellipsis",WebkitBoxOrient:"vertical",WebkitLineClamp:1,maxWidth:"100%",fontSize:{xs:"11px",sm:"16px"}}}}),t.jsx(O,{sx:{m:{xs:0,sm:1}},children:t.jsx(W,{children:t.jsx(m,{variant:"h4",align:"center",sx:{fontSize:{xs:"25px",sm:"30px"}},children:`$ ${L(o)}`})})})]}),t.jsxs(N,{disableSpacing:!0,children:[t.jsx(f,{"aria-label":"add to favorites",onClick:$,sx:{"&:focus":{outline:"none"}},children:t.jsx(u,{title:"Add to Favorites",arrow:!0,children:t.jsx(Y,{sx:{color:v?"secondary.main":"inherit"}})})}),t.jsx(f,{"aria-label":"share",onClick:T,sx:{"&:focus":{outline:"none"}},children:t.jsx(u,{title:"Add to Cart",arrow:!0,children:t.jsx(G,{sx:{color:y?"primary.main":"inherit"}})})}),t.jsx(ae,{expand:i,onClick:M,"aria-expanded":i,"aria-label":"show more",sx:{"&:focus":{outline:"none"}},children:t.jsx(u,{title:"+ Info",arrow:!0,children:t.jsx(Q,{})})})]}),t.jsx(U,{in:i,timeout:"auto",unmountOnExit:!0,children:t.jsx(W,{children:t.jsx(m,{variant:"body2",sx:{color:"text.secondary"},children:a})})}),t.jsxs(V,{open:F,children:[t.jsx(X,{children:"Login Required"}),t.jsx(Z,{children:t.jsx(m,{variant:"body1",children:"You must log in to add products to favorites."})}),t.jsx(_,{children:t.jsx(ee,{onClick:z,color:"primary",children:"OK"})})]})]})}export{xe as I};
